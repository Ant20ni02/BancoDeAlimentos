CREATE database BancoDeAlimentos;
use BancoDeAlimentos;

-- drop database BancoDeAlimentos;

CREATE TABLE User_(
 idUser int auto_increment NOT NULL,
 firstName varchar(25),
 lastName varchar(25),
 email varchar(50),
 img text default('data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAjAAD/4QMdaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAyMSA3OS4xNTU3NzIsIDIwMTQvMDEvMTMtMTk6NDQ6MDAgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI0RUU1MTc5NDY3MjExRTVBRkU5QzM4RTZFMTQ4MkRCIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI0RUU1MTc4NDY3MjExRTVBRkU5QzM4RTZFMTQ4MkRCIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE0IFdpbmRvd3MiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0iMkY5QzA2MUU1MDM4QkExNjY1RjUwQkVBN0RFNzUzODgiIHN0UmVmOmRvY3VtZW50SUQ9IjJGOUMwNjFFNTAzOEJBMTY2NUY1MEJFQTdERTc1Mzg4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQADgoKCgsKDgsLDhQNCw0UGBIODhIYGxYWFxYWGxoUFxcXFxQaGh8gIyAfGikpLS0pKT07Ozs9QEBAQEBAQEBAQAEPDQ0PEQ8SEBASFA4RDhQXEhQUEhchFxcZFxchKh4aGhoaHiomKSMjIykmLy8qKi8vOjo4OjpAQEBAQEBAQEBA/8AAEQgAyADIAwEiAAIRAQMRAf/EAGsAAQEBAQEBAQAAAAAAAAAAAAABBQQCAwYBAQAAAAAAAAAAAAAAAAAAAAAQAQACAQEHAgUEAgMAAAAAAAABAgMSESExUXEyBEEFYYGRsSKhUhMzQiPBcjQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AP1trW1TvTVbnJbunqgLqtzk1W5ygC6rc5NVucoAuq3OTVbnKALqtzk1W5ygC6rc5NVucoAuq3OTVbnKALqtzk1W5ygC6rc5NVucoAuq3OTVbnKALqtzk1W5ygC6rc5NVucoAuq3ORAFt3T1Rbd09UAAAAAAAAAAiJngAPpGDNPDHb6Sk4c0ccdvpIPAAAAAAAAAAAALbunqi27p6oAAAAAAA+mLBkzTspHWfR78XxpzW2zuxxxnn8GrWtaVitY2RHoDlxeBirvyfnb9HVWlaRsrEVj4RsUAAB5vjx5I/OsW6w5M3t9Z34p2T+2eDtAYl6WpbTeNkvLZzYKZq6bcfS3rDJy4r4r6LfKeYPAAAAAAAALbunqi27p6oAAAAA94cVsuSKR68Z+Dw0Pb8Wyk5J423R0gHXSlaVild1Y4PQAAAAAAAPj5OCM2PZ/nG+svsAwp3bpHT5+LRm1Rwvv+fq5gAAAAAAW3dPVFt3T1QAAAABs4K6MVK8ojb1YzdAAAAAAAAAABye4VicMW/bP3ZrV87/zX+X3hlAAAAAAAtu6eqLbunqgAAAADcrOqsW5xE/Vhtbw8mvx686/jPyB9wAAAAAAAAAc3nzs8fZzmIZbu9xvvpj62n7OEAAAAAAFt3T1Rbd09UAAAAAdXg5v48mid1b/dygN0cvieTGWui8/7I/V1AAAAAAAJa0VrNp3RHFWd5vkxf/Vjn8Y7p5g5s2ScuS153beHR4AAAAAAAFt3T1Rbd09UAAAAAB04PCyZfyt+FP1kHPWbRaJr3emxr+PfLfHty102+/yXF4+LFH4V3/u9X0AAAAAABweb5GSJnFETWvrbm4W5atbRstG2J9Jceb2+sxtwzsn9s8AZ4tqWpbTeNkx6IAAAAAAC27p6otu6eqAAAERMzsjfM8IGn4fi/wAVdd/7J/QHnxvCrTZfLvv6V9IdgAAAAAAAAAAA+ebBjzV2Xjhwt6wys+C+G2m2+PS3NsvGXFXLSaX4SDFHvNithvNLfKecPAAAAALbunqi27p6oAD1jxzkyVpHGwOvwPH1T/NbhHZ15tBKVrSsUrwjdCgAAAAAAAAAAAAAA+Pk4IzY9n+cdssiYmJ2Txhus7z8Om8ZY4W7uoOMAAAFt3T1Rbd09UAd3t2PbNss+n4x/wAuFr+JTR49I5xt+oPsAAAAAAAAAAAAAAAA+efH/LitT1mN3WH0AYQ+vlU0Z7x8dv13vkAAC27p6otu6eqANyI2REcmLj/sp8bQ2wAAAAAAAAAAAAAAAAAAZvuFdmaJ51cjt9y7qdJcQAALbunqgA9Yv7af9o+7bAAAAAAAAAAAAAAAAAAAGf7lxx/NxAAAD//Z'),
 password_ varchar(100),
 age int,
 sex varchar(10),
 phoneNumber varchar(15),
 userType varchar(20),
 isActive bool,
 primary key (idUser)
);

CREATE TABLE Family(
 idFamily varchar(100) NOT NULL,
 familyMembers int,
 familyLastName varchar(25),
 pregnancy int,
 primary key(idFamily)
);

CREATE TABLE MedicalCondition(
 medicalConditionName varchar(25),
 medicalConditionNumber int,
 idFamily varchar(100),
 CONSTRAINT fk_Family_MedicalCondition1
			FOREIGN KEY (idFamily) REFERENCES Family(idFamily)
);

CREATE TABLE Survey(
 idSurvey int auto_increment NOT NULL,
 idUser int NOT NULL,
 idFamily varchar(100) NOT NULL,
 latitude double,
 longitude double,
 date_ varchar(10),
 CONSTRAINT fk_User_Survey1
			FOREIGN KEY (idUser) REFERENCES User_(idUser),
CONSTRAINT fk_Family_Survey2
			FOREIGN KEY (idFamily) REFERENCES Family(idFamily),
 primary key (idSurvey)
);

CREATE TABLE Question(
 idQuestion int,
 idSurvey int,
 answer varchar(20),
 CONSTRAINT fk_Survey_Question1
			FOREIGN KEY (idSurvey) REFERENCES Survey(idSurvey)
);

CREATE TABLE FoodAvailable(
 idFoodAvailable int,
 foodName varchar(50),
 quantity int,
 primary key(idFoodAvailable)
);

CREATE TABLE FoodSuggested(
 idFamily varchar(100),
 idFoodAvailable int,
 foodName varchar(50),
 quantity int,
 CONSTRAINT fk_Family_FoodSuggested1
			FOREIGN KEY (idFamily) REFERENCES Family(idFamily),
 CONSTRAINT fk_FoodAvailable_FoodSuggested2
			FOREIGN KEY (idFoodAvailable) REFERENCES FoodAvailable(idFoodAvailable)
);